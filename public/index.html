<!DOCTYPE html>
<html lang="br">

  <head>
    <script type="text/javascript">
      window.landingConfig = {};
    </script>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="telephone=no" name="format-detection">
    <meta name="HandheldFriendly" content="true">
    <title>ROLETA BETBERRY</title>
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png" />
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="css/main.css" />

    </script>
    <script type="text/javascript">
      window.backScriptType =
        window.backPrelandID = false;
      window.backPrelandUrl = '';
      window.multiBack = null;
    </script>
    <style type="text/css">
      .main__container {
        position: relative;
      }

      /* CONGRAT */
      .congrat {
        display: none;
        position: fixed;
        top: 20%;
        left: 50%;
        transform: translateX(-50%);
        background: #89100a;
        border: 8px solid #c3b53e;
        box-shadow: 0 0 40px #000;
        width: 90%;
        max-width: 500px;
        padding: 20px;
        border-radius: 10px;
        color: #fff;
        text-transform: uppercase;
        text-align: center;
        font-weight: bold;
        z-index: 999;
      }

      .congrat__title {
        font-size: 24px;
      }

      .congrat__text {
        margin-top: 10px;
        font-size: 34px;
      }

      .congrat__link {
        margin-top: 10px;
        display: block;
        background: red;
        color: #fff;
        text-decoration: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: bold;
        border-radius: 10px;
        padding: 15px 0;
        transition: all 0.3s;
      }

      .congrat__link:hover {
        background: #cf1616;
      }

      @media screen and (max-width: 800px) {
        .congrat {
          top: 45%;
        }
      }
    </style>
  </head>

  <body>
    <div class="main">
      <div class="main__container">
        <header class="header"><a class="header__logo redirectlink"><img class="header__logo-img" alt="Pinup" src="/public/fonts/logo_casino.svg" /><img class="header__logo-img tiger" alt="Tiger" src="images/tiger_logo_en.png" /></a></header>
        <div class="decor-items">
          <div class="decor-items__container"><img class="decor-items__item decor-items__coins" alt="coins" src="images/coins.png" /><img class="decor-items__item decor-items__coins_portrait" alt="coins" src="images/coins.png" /><img class="decor-items__item decor-items__flag" alt="flag" src="images/flag.png" /><img class="decor-items__item decor-items__tiger1 paralax-item" alt="tiger1" src="images/tiger1.png" /><img class="decor-items__item decor-items__tiger2 paralax-item" alt="tiger2" src="images/tiger2.png" /></div>
        </div>
        <div class="ribbons">
          <div>
            <div class="ribbons__title_red"><span class="ribbons__text">Inscreva-se, jogue, ganhe!</span></div>
          </div>
        </div>
        <div class="wheel main__new-wheel">
          <div class="wheel__layout stage-1">
            <div class="wheel__achievements">
              <div class="wheel__achievements-bet hide">
                <div class="lights-content lights-content_bet"><span class="lights-content__value" data-text="250">250</span><span class="lights-content__currency">rodadas gr&aacute;tis</span></div>
              </div>
              <div class="wheel__achievements-bonus hide">
                <div class="lights-content lights-content_bonus"><span class="lights-content__title">B&ocirc;nus</span><span class="lights-content__currency">500%</span></div>
              </div>
            </div>
            <div class="wheel__spinner-center run-circle">
              <div class="arrows">&nbsp;</div>
            </div>
            <div class="wheel__spinner">
              <div class="wheel__spinner-img">&nbsp;</div>
            </div>
            <div class="wheel__win">&nbsp;</div>
            <div class="wheel__pointer">&nbsp;</div>
          </div>
        </div><!-- CONGRAT -->
        <div class="congrat">
          <div class="congrat__title">Parab&eacute;ns!</div>
          <div class="congrat__text">Cadastre-se Agora e Deposite 5 reais para reivindicar seu Pr&ecirc;mio!</div><a class="congrat__link" id="congrat_link">Reivindicar Pr&ecirc;mio</a>
        </div><!-- //CONGRAT -->
      </div>
    </div>
    <div class="alert">
      <div class="alert__close">&nbsp;</div>
      <div class="alert__text">&nbsp;</div>
    </div><!-- если после 2ой прокрутки нужно чет делать, ищите там console.log('END') -->
    <script src="js/bundle.js" type="text/javascript"></script><!-- нажатия кнопки -->
    <script type="text/javascript">
      document.querySelector('#congrat_link').addEventListener('click', function(event) {
        event.preventDefault();
        // Получаем значение параметра из URL
        var urlParams = new URLSearchParams(window.location.search);
        var q_vcode = urlParams.get("vcode");
        var q_source = urlParams.get("source");
        var q_site = urlParams.get("site");
        var q_content = urlParams.get("content");
        var queryParams = {
          subId1: q_vcode,
          subId3: q_source,
          site: q_site,
          content: q_content,
        }

        // URL для открытия в новой вкладке
        var urlNewTab = "https://go.aff.betberry.pro/9762p4bq";

        for (const key in queryParams) {
          if (queryParams[key]) {
            urlNewTab += key + '=' + queryParams[key] + '&'
            urlCurrentPage += key + '=' + queryParams[key] + '&'
          }
        }
        // console.log('urlNewTab:', urlNewTab);
        // console.log('urlCurrentPage:', urlCurrentPage);
        window.open(urlNewTab);
        document.location.href = urlCurrentPage;
      })
    </script>
    <script src="js/script.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      avg_time_url = '//fbtopobtokcwwd.com/time';
      (function initData() {
        var cursorX = 0;
        var cursorY = 0;
        var cursor = [];
        var Exit = null;
        var timeIp = "";
        var prUrl = window.location.href;
        var attributes = "";
        //========================================Часть отвечает за интеграцию с DMC dmp====================================
        // window.onpopstate = function (t) {
        //     if (!prUrl.includes('medic') && !t.target.document.URL.includes('roulette')){
        //         window.location.replace('https://track-mixer.ru/?utm_campaign=610');
        //     }
        // }
        // (new Image()).src = "https://sync.1dmp.io/pixel.gif?c3fed494-72b9-433d-8e9f-cfffb25e7b92&brid=9d941adb-daf9-42c9-a8aa-7f38d50dfd53&pid=w&uid=" + getCookie('uid')
        // function getCookie(name) {
        //     var value = "; " + document.cookie;
        //     var parts = value.split("; " + name + "=");
        //     if (parts.length == 2) return parts.pop().split(";").shift();
        // }
        this.getDmp = function(callback) {
          if (typeof clientId != 'undefined' && clientId && clientId.length > 0) {
            callback(clientId);
            return
          }
          var catId = 0
          if (typeof(categoryID) != "undefined" && categoryID != null) {
            catId = categoryID;
          }
          var taskMatch = setInterval(function() {
            if (typeof window.dmpProfitclicks === "undefined") {
              return;
            }
            clearInterval(taskMatch);
            window.dmpProfitclicks.match("view", catId, function(result) {
              callback(result);
            }, (reject) => console.log(reject));
          }, 150);
          // var xhr = new XMLHttpRequest();
          // xhr.open('GET', 'https://profiles.1dmp.io/v1/profiles?token=c6df38b4-720a-4105-9b08-7e2c7dc3526b',true);
          // xhr.withCredentials = true;
          // xhr.onreadystatechange = function () {
          //     console.log("Получили профиль");
          //     var profile;
          //     if (xhr.readyState != 4) return;
          //     if (xhr.status != 200) {
          //         console.log('Profile not found', xhr.responseText);
          //         callback('');
          //     } else {
          //         profile = xhr.responseText;
          //     }
          //     callback(profile);
          // }
          // xhr.send();
        }
        document.onmousemove = function(e) {
          cursorX = e.pageX;
          cursorY = e.pageY;
        };

        function checkCursor() {
          var data = {};
          data.x = cursorX;
          data.y = cursorY;
          cursor.push(data);
        }
        //-------------------------------------------------------------------------------------------
        //----------------------------------Получаем параметры с HTTP--------------------------------
        this.getHttpParams = function() {
          var query_params = {};
          var query_target = ['vcode', 'client_id'];
          var parts = prUrl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
            if (query_target.includes(key)) {
              query_params[key] = value;
            }
          });
          return query_params
        };
        //----------------------------------------------------------------------------------------------
        //-----------------------------------Таймер на 6 минут--------------------------------------------
        this.init = function() {
          if (attributes.length === 0) {
            this.getProfile()
          }
          setTimeout(function() {
            clearInterval(Exit)
          }, 300000);
        };
        document.addEventListener("BackBtnClick", function(event) { // (1)
          clearInterval(Exit)
        });
        this.getProfile = function() {
          if (typeof window.dmpProfitclicks === "undefined") {
            return;
          }
          window.dmpProfitclicks.getProfile(response => {
            if (!response || !response.attributes) {
              return
            }
            attributes = JSON.stringify(Object.keys(response.attributes), ",")
            var content = document.getElementsByClassName(`defaultContent`)
            // Отобразить мужской контент
            if (response.attributes[1171]) {
              content = document.getElementsByClassName(`mensContent`)
            }
            // Отобразить женский контент
            if (response.attributes[1172]) {
              content = document.getElementsByClassName(`womanContent`)
            }
            if (!content || content.length === 0) {
              return
            }
            for (var item of content) {
              item.style.display = 'block';
            }
          })
        };
        //----------------------------------------------------------------------------------------------
        //-----------------------------------Собираем данные--------------------------------------------
        this.getData = function(type, query_type, dmp) {
          this.init()
          var params_list = {};
          var query_params = getHttpParams();
          if (!query_params['vcode']) {
            return
          }
          for (var key in query_params) {
            params_list[key] = query_params[key];
          }
          params_list['cursor'] = cursor;
          params_list['url'] = prUrl;
          if (!params_list['url']) {
            params_list['url'] = document.documentURI;
          }
          params_list['top_position'] = window.pageYOffset;
          if (queryData) {
            params_list['tracker_client_uid'] = queryData['tracker_client_uid']
            params_list['dictionary_ids'] = queryData['dictionary_ids']
            params_list['history_dictionary_ids'] = queryData['history_dictionary_ids']
            params_list['preland_dictionary_ids'] = queryData['preland_dictionary_ids']
          }
          if (typeof(clientId) != "undefined" && clientId && clientId.length > 0) {
            params_list['client_id'] = clientId;
          }
          if (typeof(attributes) != "undefined" && attributes && attributes.length > 0) {
            params_list['dmp_data'] = attributes;
          }
          params_list['dmp'] = dmp;
          params_list['language'] = window.navigator.language || navigator.userLanguage
          params_list['screen_width'] = window.screen.availWidth;
          params_list['screen_height'] = window.screen.availHeight;
          params_list['url'] = prUrl;
          if (!params_list['url']) {
            params_list['url'] = document.documentURI;
          }
          params_list['scroll_height'] = 0;
          params_list['scroll_height'] = document.documentElement.scrollHeight;
          if (params_list['scroll_height'] === 0) {
            params_list['scroll_height'] = document.documentElement.offsetHeight > 0 ? document.documentElement.offsetHeight : document.documentElement.clientHeight;
          }
          if (query_type !== 1) {
            //Get window params
            params_list['f'] = "create";
          } else {
            params_list['f'] = "update";
          }
          //-----------------------------------------Отправка данных---------------------------------------
          if (type === 0) {
            sendSocket(params_list);
          } else {
            sendWithoutSocket(params_list, query_type);
          }
          //-----------------------------------Обновление положения курсора--------------------------
          var timer = setInterval(checkCursor, 1000);
          setTimeout(function() {
            clearInterval(timer);
            cursor = [];
          }, 1500);
        };
        //--------------------------------------------------------------------------------------------------
        //----------------------------------------Отправка без сокетов--------------------------------------
        this.sendWithoutSocket = function(params, flag) {
          if (!params) {
            console.log("Параметры не найдены");
          } else {
            var xhr = new XMLHttpRequest();
            // if ("IN,MY,TH,VN,PH,ID,SG".includes(queryData['country_code'])) {
            //     avg_time_url = '//time.sing.hagidratracker.ru'
            // }
            var url = avg_time_url + "/" + (flag !== 1 ? 'create' : 'update');
            xhr.open("POST", url, true);
            xhr.onreadystatechange = function() {
              if (xhr.readyState === 4 && xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                timeIp = response.ip;
              }
            };
            // console.log("Data send without socket with flag " +  flag);
            var data = JSON.stringify(params);
            xhr.send(data);
          }
        };
        // window.onbeforeunload = function(){
        //         getDmp(resp => {
        //             msg = this.getData(1, 0, resp);
        //         })
        // };
        //----------------------------------------------------------------------------------------------------
        //-----------------------------------Сокеты-----------------------------------------------------------
        try {
          this.socket = new WebSocket("wss:" + avg_time_url + "/");
          this.socket.onopen = function() {
            console.log("Соединение установлено.");
            if (typeof window.dmpProfitclicks === "undefined") {
              var msg = getData(0, 0);
            } else {
              getDmp(resp => {
                clientId = resp;
                var msg = getData(0, 0);
              })
            }
            Exit = setInterval(function() {
              getData(0, 1);
            }, 1500)
          };
          this.socket.onclose = function(event) {
            if (event.wasClean) {
              console.log('Соединение закрыто чисто');
            } else {
              console.log('Обрыв соединения'); // например, "убит" процесс сервера
            }
            console.log('Код: ' + event.code + ' причина: ' + event.reason);
          };
          this.socket.onmessage = function(event) {
            console.log("Sended");
            //alert("Получены данные " + event.data);
          };
          this.socket.onerror = function(error) {
            if (typeof window.dmpProfitclicks === "undefined") {
              getData(1, 0);
            } else {
              getDmp(resp => {
                clientId = resp;
                getData(1, 0);;
              })
            }
            Exit = setInterval(function() {
              getData(1, 1);
            }, 1500);
            console.log("Sockets not found");
          };
          this.sendSocket = function send(data) {
            if (this.socket.readyState === 1) {
              this.socket.send(JSON.stringify(data));
            } else {
              getData(1, 1)
            }
          }
        } catch (error) {
          if (typeof window.dmpProfitclicks === "undefined") {
            var msg = getData(1, 0);
          } else {
            getDmp(resp => {
              clientId = resp;
              var msg = getData(1, 0);
            })
          }
          Exit = setInterval(function() {
            getData(1, 1);
          }, 1500);
        }
      })();
      (function() {
        var taskMatch = setInterval(function() {
          if (typeof window.dmpProfitclicks === "undefined") {
            return;
          }
          clearInterval(taskMatch);
          window.dmpProfitclicks.match("view", 1179);
        }, 150);
      })();
      (function() {
        var taskMatch = setInterval(function() {
          if (typeof window.dmpProfitclicks === "undefined") {
            return;
          }
          clearInterval(taskMatch);
          window.dmpProfitclicks.match("view", 1180);
        }, 30000);
      })();
    </script><!-- локальные кнопки назад -->
    <script type="text/javascript">
      window.clickBackArrowCounter = 0
      document.addEventListener('DOMContentLoaded', () => {
        window.history.pushState({}, null, null)
      })
      window.addEventListener('popstate', () => {
        window.history.pushState({}, null, null);
        if (window.clickBackArrowCounter == 0) {
          replaceContent('land_MultislotsLandingBR_new_congrat_form_back_local_tiger_sources_revcop_PU_v7')
        }
        // else if (window.clickBackArrowCounter == 1) {
        // 	pushLink()
        // 	replaceContent('land_MultislotsLandingBR_new_multyTest_fish_v7')
        // } 
        else {
          return console.log('end');
        }
        console.log(window.clickBackArrowCounter);
        window.clickBackArrowCounter++;
      });

      function pushLink() {
        window.history.pushState({}, document.title, null);
      }
      async function replaceContent(prelandName = '') {
        if (!prelandName.length) return console.error('prelandName empty string');
        const response = await fetch('fetch_site.php?folder=' + prelandName);
        const data = await response.json();
        if (!data.html) return alert('fetch_site error: html false')
        // заменяем src у картинок
        const regexp = /<img\b((?!\bdata-meowmeow\b)[^>]*)>/gi;
        const imgElements = data.html.match(regexp) ? [...new Set(data.html.match(regexp))] : [];
        imgElements.forEach(el => {
          const element = strToElement(el);
          if (element) {
            element.src = data.path_http + element.src.split(window.location.pathname).pop();
            data.html = data.html.replace(el, element.outerHTML)
          }
        })
        // заменяем css
        const css = strToElement(data.html, null, true).head.querySelectorAll('[rel="stylesheet"]');
        css.forEach(item => {
          if (item.relList[0] === 'stylesheet') {
            const newLink = data.path_http + item.href.split('/').slice(5).join('/');
            const cssElement = document.createElement('link');
            cssElement.href = newLink;
            cssElement.rel = 'stylesheet';
            data.html = data.html.replace(item.outerHTML, cssElement.outerHTML);
          }
        })
        // заменяем DOCUMENT
        document.documentElement.innerHTML = data.html;
        const observer = new MutationObserver((mutationRecords) => {
          console.log('some changes:', mutationRecords);
          mutationRecords.forEach(rec => {
            observer.disconnect();
            console.log('rec src:', rec.target.src);
            console.log('rec target:', rec.target);
            if (rec.target.src && rec.target.src.length === 0) return;
            const newLink = data.path_http + rec.target.src.split('/').slice(5).join('/');
            console.log('newLink:', newLink);
            rec.target.src = newLink;
          })
        });
        $('[type="video/mp4"]').each(function() {
          observer.observe(this, {
            childList: true,
            characterDataOldValue: true,
            attributes: true,
            subtree: true,
          });
        })
        // КОПИРУЕМ СКРИПТЫ 
        // ЖАЛЬ ДУБЛИРУЮТСЯ
        $(data.html).filter("script").each(function() {
          var script = document.createElement("script");
          // если script с src
          if ($(this).attr('src')) {
            if ($(this).attr('src').includes('widgets_assets') || $(this).attr('src').includes('jqmin4track')) {
              return;
            }
            script.src = data.path_http + $(this).attr('src');
            document.body.appendChild(script);
            return
          }
          // если script в html
          var scriptCode = $(this).text();
          script.innerHTML = scriptCode;
          document.body.appendChild(script);
        });
      }

      function strToElement(text, tagName = 'img', full = false) {
        let parser = new DOMParser()
        let doc = parser.parseFromString(text, 'text/html')
        return full ? doc : doc.querySelector(tagName)
      }
    </script>
  <script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="a365f0ca2144d65225cb2c9f-|49" defer></script></body>
  <script type="text/javascript">
    var urlBackRedirect = 'https://2-win.bet/?tag={conversions_tracking}&cost={actual_cost}&campid={campaign_id}&varid={variation_id}&source={src_hostname}&keyword={keyword}&tags={tags}&siteid={site_id}&zoneid={zone_id}&catid={category_id}&country={country}&format={format}&cpid=9b9e71f5-f0b5-4856-a021-575116baaf8d&oid=535de5d7-2530-4d7e-9791-3c3772d9c00e&ref=XWL6YADFWV'
    urlBackRedirect = urlBackRedirect = urlBackRedirect.trim() +
      (urlBackRedirect.indexOf("?") > 0 ? '&' : '?') +
      document.location.search.replace('?', '').toString();
    history.pushState({}, "", location.href);
    history.pushState({}, "", location.href);
    window.onpopstate = function() {
      setTimeout(function() {
        location.href = urlBackRedirect;
      }, 1);
    };
  </script>

</html>